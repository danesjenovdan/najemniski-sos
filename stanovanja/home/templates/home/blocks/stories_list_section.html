{% load static wagtailcore_tags wagtailimages_tags %}

<div class="stories-list-section">
    <div class="row">
        <div class="col-lg-8">
            {% for story in rental_stories|slice:":3" %}
            <div class="list-element {% if not story.hide_location %}is-clickable{% endif %}" {% if not story.hide_location %} onclick="openStoryOnMap({{ story.id }})" {% endif %}>
                <div class="story-description">
                    {% if story.description|length > 200 %}
                    <p style="display: none">{{ story.description }}</p>
                    <p>{{ story.description|truncatechars:200 }}</p>
                    {% else %}
                    <p>{{ story.description }}</p>
                    {% endif %}
                </div>
                <div class="user d-flex align-items-center">
                    <span>{{ story.icon }}</span>
                    <span>{{ story.displayed_name }}</span>
                </div>
                {% if story.description|length > 200 %}
                <div class="text-end">
                    <button class="btn read-more">
                        <span>PREBERI VEČ</span>
                        <img src="{% static 'icons/arrow.svg' %}" />
                    </button>
                </div>
                {% endif %}
            </div>
            {% endfor %}
            <button class="btn btn-background w-100 my-4 mx-0" data-bs-toggle="modal" data-bs-target="#newStoryFormModal">
                {{ value.button_text }}
                <img src="{% static 'icons/curved-arrow.svg' %}" />
            </button>
            {% for story in rental_stories|slice:"3:" %}
            <div class="list-element {% if not story.hide_location %}is-clickable{% endif %}" {% if not story.hide_location %} onclick="openStoryOnMap({{ story.id }})" {% endif %}>
                <div class="story-description">
                    {% if story.description|length > 200 %}
                    <p style="display: none">{{ story.description }}</p>
                    <p>{{ story.description|truncatechars:200 }}</p>
                    {% else %}
                    <p>{{ story.description }}</p>
                    {% endif %}
                </div>
                <div class="user d-flex align-items-center">
                    <span>{{ story.icon }}</span>
                    <span>{{ story.displayed_name }}</span>
                </div>
                {% if story.description|length > 200 %}
                <div class="text-end">
                    <button class="btn read-more">
                        <span>PREBERI VEČ</span>
                        <img src="{% static 'icons/arrow.svg' %}" />
                    </button>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <div class="col-lg-4">
            <div id="mapid"></div>
        </div>
    </div>
</div>
